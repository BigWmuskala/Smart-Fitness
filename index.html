<!DOCTYPE html> <html lang="nl"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> <title>FITNESS AI - PRO SKELETON</title> <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js"></script> <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script> <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"></script> <style> @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=Rajdhani:wght@500;700&display=swap'); :root { --neon-blue: #00f2ff; --neon-purple: #bc13fe; --neon-green: #39ff14; --dark-bg: #050505; --card-bg: #111; } body { margin: 0; font-family: 'Rajdhani', sans-serif; background: var(--dark-bg); color: white; overflow-x: hidden; } .app { max-width: 600px; margin: auto; padding-bottom: 100px; } .neon-header { padding: 30px 20px; font-family: 'Orbitron', sans-serif; text-transform: uppercase; letter-spacing: 3px; color: var(--neon-blue); text-shadow: 0 0 10px var(--neon-blue); text-align: center; } .card { background: var(--card-bg); border: 1px solid #333; margin: 15px; padding: 25px; border-radius: 15px; box-shadow: 0 0 15px rgba(0,0,0,0.5); } .stats-row { display: flex; justify-content: space-around; width: 100%; margin-bottom: 20px; font-family: 'Orbitron', sans-serif; } .stat-num { font-size: 42px; color: var(--neon-purple); text-shadow: 0 0 15px var(--neon-purple); } .canvas-container { position: relative; width: 100%; aspect-ratio: 4/3; border: 2px solid var(--neon-blue); border-radius: 12px; overflow: hidden; background: #000; } canvas { width: 100%; height: 100%; transform: scaleX(-1); } /* Vorm-meter styling */ .meter-container { position: absolute; right: 20px; top: 20%; width: 25px; height: 60%; background: rgba(255,255,255,0.1); border: 2px solid #333; border-radius: 12px; overflow: hidden; z-index: 10; } #progress-fill { position: absolute; bottom: 0; width: 100%; height: 0%; background: var(--neon-blue); box-shadow: 0 0 15px var(--neon-blue); transition: height 0.1s ease-out; } .btn-neon { width: 100%; padding: 18px; margin-top: 15px; background: transparent; border: 2px solid var(--neon-blue); color: var(--neon-blue); font-family: 'Orbitron', sans-serif; font-weight: 900; cursor: pointer; text-transform: uppercase; transition: 0.3s; } .btn-neon:hover { background: var(--neon-blue); color: black; box-shadow: 0 0 20px var(--neon-blue); } #rest-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); display: none; flex-direction: column; align-items: center; justify-content: center; z-index: 100; } .hidden { display: none; } .nav { position: fixed; bottom: 0; width: 100%; max-width: 600px; display: flex; background: #000; border-top: 2px solid var(--neon-purple); padding: 15px 0; z-index: 200; } .nav-link { flex: 1; text-align: center; color: #555; cursor: pointer; font-weight: bold; } .nav-link.active { color: var(--neon-purple); } </style> </head> <body> <div class="app"> <div id="onboarding"> <h1 class="neon-header">System Boot</h1> <div class="card" id="questionCard"></div> </div> <div id="home" class="hidden"> <h1 class="neon-header">Status: Online</h1> <div class="card" id="startActionCard"></div> </div> <div id="workoutScreen" class="hidden"> <h1 class="neon-header" id="exerciseTitle">Training</h1> <div class="card"> <div class="stats-row"> <div style="text-align:center">SET<div class="stat-num" id="set-display">1/3</div></div> <div style="text-align:center">REPS<div class="stat-num" id="rep-display">0/12</div></div> </div> <div class="canvas-container"> <div id="rest-overlay"> <h2 style="color:var(--neon-blue)">RECOVERY MODE</h2> <div id="rest-timer" style="font-size: 64px;">30</div> </div> <div class="meter-container"> <div id="progress-fill"></div> </div> <canvas id="canvas" width="640" height="480"></canvas> </div> <button class="btn-neon" style="border-color: #ff0055; color: #ff0055;" onclick="location.reload()">Abort Session</button> </div> </div> </div> <div class="nav" id="mainNav" style="display:none;"> <div class="nav-link active">DASHBOARD</div> <div class="nav-link" onclick="localStorage.clear(); location.reload();">RESET</div> </div> <script> let userData = {}; let currentStep = 1; let pose, camera, canvasCtx; let reps = 0, currentSet = 1, maxSets = 3, repsPerSet = 12, status = "up", isResting = false; let initialHipY = null; function speak(text) { window.speechSynthesis.cancel(); const msg = new SpeechSynthesisUtterance(text); msg.lang = 'nl-NL'; window.speechSynthesis.speak(msg); } function calculateAngle(a, b, c) { let radians = Math.atan2(c.y - b.y, c.x - b.x) - Math.atan2(a.y - b.y, a.x - b.x); let angle = Math.abs(radians * 180.0 / Math.PI); if (angle > 180.0) angle = 360 - angle; return angle; } function renderStep() { const container = document.getElementById("questionCard"); if (currentStep === 1) { container.innerHTML = <h3>IDENTIFICEER LEEFTIJD</h3><input type="number" id="ageInput" style="width:80%; padding:10px; margin-bottom:10px;"><button class="btn-neon" onclick="saveAge()">CONFIRM</button>; } else if (currentStep === 2) { container.innerHTML = <h3>SELECTEER PROTOCOL</h3><button class="btn-neon" onclick="setGoal('legs')">SQUATS</button><button class="btn-neon" style="margin-top:10px" onclick="setGoal('chest')">PUSH-UPS</button>; } } function saveAge() { userData.age = document.getElementById('ageInput').value; currentStep = 2; renderStep(); } function setGoal(goal) { userData.goal = goal; userData.level = 'beginner'; localStorage.setItem("fitnessProFinal", JSON.stringify(userData)); showHome(); } function showHome() { hideAll(); document.getElementById("home").classList.remove("hidden"); document.getElementById("mainNav").style.display = "flex"; document.getElementById("startActionCard").innerHTML = <h2 style="margin:0">${userData.goal === 'legs' ? 'SQUAT' : 'PUSH-UP'} MODE</h2> <p>DOEL: 3 SETS VAN 12</p> <button class="btn-neon" onclick="startWorkout()">START ANALYSE</button> ; } function hideAll() { ["onboarding", "home", "workoutScreen"].forEach(id => { const el = document.getElementById(id); if(el) el.classList.add("hidden"); }); } async function startWorkout() { hideAll(); document.getElementById("workoutScreen").classList.remove("hidden"); canvasCtx = document.getElementById("canvas").getContext("2d"); const videoElement = document.createElement('video'); pose = new Pose({ locateFile: (file) => https://cdn.jsdelivr.net/npm/@mediapipe/pose/${file} }); pose.setOptions({ modelComplexity: 1, smoothLandmarks: true, minDetectionConfidence: 0.5, minTrackingConfidence: 0.5 }); pose.onResults(onResults); camera = new Camera(videoElement, { onFrame: async () => { await pose.send({image: videoElement}); }, width: 640, height: 480 }); speak("Systeem gereed. Ga rechtop staan."); camera.start(); } function onResults(results) { canvasCtx.save(); canvasCtx.clearRect(0, 0, 640, 480); canvasCtx.drawImage(results.image, 0, 0, 640, 480); if (results.poseLandmarks && !isResting) { const lm = results.poseLandmarks; drawConnectors(canvasCtx, lm, POSE_CONNECTIONS, {color: '#00f2ff', lineWidth: 3}); drawLandmarks(canvasCtx, lm, {color: '#bc13fe', lineWidth: 1, radius: 3}); let progressFill = document.getElementById("progress-fill"); if (userData.goal === 'legs') { // SQUAT LOGICA let leftKnee = calculateAngle(lm[23], lm[25], lm[27]); let rightKnee = calculateAngle(lm[24], lm[26], lm[28]); let avgKneeAngle = (leftKnee + rightKnee) / 2; let hipY = (lm[23].y + lm[24].y) / 2; // Dynamische kalibratie: als je recht staat, update initialHipY if (avgKneeAngle > 170) initialHipY = hipY; // Vul de meter op basis van diepte (170 graden = 0%, 115 graden = 100%) let depth = (170 - avgKneeAngle) / 55; let visualPercent = Math.min(Math.max(depth * 100, 0), 100); progressFill.style.height = visualPercent + "%"; progressFill.style.backgroundColor = visualPercent > 85 ? "var(--neon-green)" : "var(--neon-blue)"; // Check heupverplaatsing (moet minstens een beetje zakken) let isLowering = initialHipY !== null && hipY > (initialHipY + 0.05); if (avgKneeAngle < 120 && isLowering) status = "down"; if (avgKneeAngle > 160 && status === "down") { status = "up"; countRep(); } } else { // PUSH-UP LOGICA let shoulderAngle = calculateAngle(lm[12], lm[14], lm[16]); let pushDepth = (160 - shoulderAngle) / 70; progressFill.style.height = Math.min(Math.max(pushDepth * 100, 0), 100) + "%"; if (shoulderAngle < 100) status = "down"; if (shoulderAngle > 150 && status === "down") { status = "up"; countRep(); } } } canvasCtx.restore(); } function countRep() { reps++; document.getElementById("rep-display").innerText = ${reps}/12; speak(reps.toString()); if (reps >= 12) handleSetCompletion(); } function handleSetCompletion() { if (currentSet >= maxSets) { speak("Workout voltooid."); setTimeout(() => location.reload(), 2000); } else { isResting = true; initialHipY = null; document.getElementById("rest-overlay").style.display = "flex"; let t = 30; let timer = setInterval(() => { t--; document.getElementById("rest-timer").innerText = t; if(t <= 0) { clearInterval(timer); isResting = false; document.getElementById("rest-overlay").style.display = "none"; reps = 0; currentSet++; document.getElementById("set-display").innerText = ${currentSet}/3; document.getElementById("rep-display").innerText = 0/12; speak("Volgende set."); } }, 1000); } } // Start app const saved = localStorage.getItem("fitnessProFinal"); if (saved) { userData = JSON.parse(saved); showHome(); } else { renderStep(); } </script> </body> </html>

